#BW Ошибки

API использует HTTP статусы для возврата ошибок.

| Статус                | Описание                               |
| :-------------------: |---------------------------------------------------------------------------------------------------------------|
| 200                   |  запрос выполнен успешно                                                                                      |
| 304                   |  документ не изменился с указанного момента                                                                   |
| 400                   |  плохо сформированный запрос (например невалидный JSON)                                                       |
| 401                   |  неверные учетные данные                                                                                      |
| 404                   |  запрошенный ресурс не существует (для запрашивающего)                                                        |
| 405                   |  не тот HTTP метод, например GET вместо POST                                                                  |
| 415                   |  не тот content-type, мы поддерживаем только application/json                                                 |
| 422                   |  запрос сформирован нормально, но не прошел валидацию, например не хватает полей или поле не в нужном формате |
| 5XX                   |  проблема с mserver, повторите запрос позже                                                                   |

HTTP статус дублируется в поле `meta.status` ответа mserver. В определенных случаях вместе со статусом возвращается уточненный код ошибки в поле `meta.error`. Например для невалидного номера телефона при создании кошелка возвращается

```json
{
  "meta" : {
    "code" : 422,
    "error" : "invalid_phone",
    "error_message": "Неверный телефон"
  }
}
```
Справочники возможных значений error для каждого вызова API описаны ниже.

## Meta

Любой успешный запрос с кошельком будет возвращать в поле `meta` следующие поля:

* `code` - код состояния HTTP
* `urgent_data` - массив с оперативной информацией:
  * `amount` - текущее кол-во денег в кошельке
  * `unseen_payments` - кол-во непросмотренных транзакций в логе

```json
{
    "meta": {
        "code": 200,
        "urgent_data": {
            "amount": 2370,
            "unseen_payments": 15
        }
    }
}
```

## Аутентификация

Используется [BASIC аутентификация](http://wikipedia.org/wiki/Basic_access_authentication). В качестве логина используется номер телефона Кошелька в международном формате. В случае, если кошелек не прошел аутентификацию, сервер вернет HTTP статус 401.

Коды ошибок

* `wallet_not_active` - кошелек не активирован
* `wallet_disabled` - заблокирован администрацией


#BW Настройки приложения

```shell
$ curl -u +79261111111:p@ssw0rD http://api.mbank.dnebo15.me/v1/options
```

```json
{
    "meta": {
        "code": 200
    },
    "data": {
        "support_phone": "+380991032585",
        "mobile_operators_category_ids": {
            "ru": 3
        }
    }
}
```
